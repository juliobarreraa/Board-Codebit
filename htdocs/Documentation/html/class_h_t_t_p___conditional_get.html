<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Codebit: HTTP_ConditionalGet Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="photo-1.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Codebit
   &#160;<span id="projectnumber">2.3</span>
   </div>
   <div id="projectbrief">Red Social</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">HTTP_ConditionalGet Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa0b30074ea5fe2d8f0bb8686afe9ede2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_t_t_p___conditional_get.html#aa0b30074ea5fe2d8f0bb8686afe9ede2">__construct</a> ($spec)</td></tr>
<tr class="memitem:a157e0005d82edaa21cbea07fdc5c62da"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_t_t_p___conditional_get.html#a157e0005d82edaa21cbea07fdc5c62da">getHeaders</a> ()</td></tr>
<tr class="memitem:ad3f66ef242895f3aeda11c349d4427bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_t_t_p___conditional_get.html#ad3f66ef242895f3aeda11c349d4427bd">setContentLength</a> ($bytes)</td></tr>
<tr class="memitem:abab55ed2b1496fd1d0f631fc99d71ed4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_t_t_p___conditional_get.html#abab55ed2b1496fd1d0f631fc99d71ed4">sendHeaders</a> ()</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a994dcfc0f524b5e7ffd96ab8b36577bc"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_t_t_p___conditional_get.html#a994dcfc0f524b5e7ffd96ab8b36577bc">check</a> ($lastModifiedTime=null, $isPublic=false, $options=array())</td></tr>
<tr class="memitem:ab08b82d956567aa37d5ff4b5ee30ac33"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_t_t_p___conditional_get.html#ab08b82d956567aa37d5ff4b5ee30ac33">gmtDate</a> ($time)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a62c9be9a8e329c890e9eae0927d50981"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a62c9be9a8e329c890e9eae0927d50981"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$cacheIsValid</b> = null</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aa03573f80dcc1da916595678e72f551c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa03573f80dcc1da916595678e72f551c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_setEtag</b> ($hash, $scope)</td></tr>
<tr class="memitem:af8714ecc2e918220278528f20b484e31"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af8714ecc2e918220278528f20b484e31"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>_setLastModified</b> ($time)</td></tr>
<tr class="memitem:a70b59d099ee11399619ccebc532a20a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_h_t_t_p___conditional_get.html#a70b59d099ee11399619ccebc532a20a7">_isCacheValid</a> ()</td></tr>
<tr class="memitem:a25f2740317b74e8b86a401a400834375"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a25f2740317b74e8b86a401a400834375"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>resourceMatchedEtag</b> ()</td></tr>
<tr class="memitem:aaa0fd8a028d1c30fa22d85939e8c0dc7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa0fd8a028d1c30fa22d85939e8c0dc7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>normalizeEtag</b> ($etag)</td></tr>
<tr class="memitem:aa32f12415d36d60664b6c459bc137d23"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa32f12415d36d60664b6c459bc137d23"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>resourceNotModified</b> ()</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a1481ae63a7fb295087c3a668a0359500"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1481ae63a7fb295087c3a668a0359500"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$_headers</b> = array()</td></tr>
<tr class="memitem:a44addb8faad0bf7b1dd1211990fc6ab5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a44addb8faad0bf7b1dd1211990fc6ab5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$_lmTime</b> = null</td></tr>
<tr class="memitem:ab87b71e158993cb35e50bff949bb6d4b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab87b71e158993cb35e50bff949bb6d4b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$_etag</b> = null</td></tr>
<tr class="memitem:aa3837eb51944153c8683c09edb5c0997"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa3837eb51944153c8683c09edb5c0997"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$_stripEtag</b> = false</td></tr>
</table>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa0b30074ea5fe2d8f0bb8686afe9ede2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$spec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$spec</td><td>options</td></tr>
  </table>
  </dd>
</dl>
<p>'isPublic': (bool) if true, the Cache-Control header will contain "public", allowing proxies to cache the content. Otherwise "private" will be sent, allowing only browser caching. (default false)</p>
<p>'lastModifiedTime': (int) if given, both ETag AND Last-Modified headers will be sent with content. This is recommended.</p>
<p>'encoding': (string) if set, the header "Vary: Accept-Encoding" will always be sent and a truncated version of the encoding will be appended to the ETag. E.g. "pub123456;gz". This will also trigger a more lenient checking of the client's If-None-Match header, as the encoding portion of the ETag will be stripped before comparison.</p>
<p>'contentHash': (string) if given, only the ETag header can be sent with content (only HTTP1.1 clients can conditionally GET). The given string should be short with no quote characters and always change when the resource changes (recommend md5()). This is not needed/used if lastModifiedTime is given.</p>
<p>'eTag': (string) if given, this will be used as the ETag header rather than values based on lastModifiedTime or contentHash. Also the encoding string will not be appended to the given value as described above.</p>
<p>'invalidate': (bool) if true, the client cache will be considered invalid without testing. Effectively this disables conditional GET. (default false)</p>
<p>'maxAge': (int) if given, this will set the Cache-Control max-age in seconds, and also set the Expires header to the equivalent GMT date. After the max-age period has passed, the browser will again send a conditional GET to revalidate its cache.</p>
<dl class="section return"><dt>Returns:</dt><dd>null </dd></dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a70b59d099ee11399619ccebc532a20a7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_isCacheValid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Determine validity of client cache and queue 304 header if valid </p>

</div>
</div>
<a class="anchor" id="a994dcfc0f524b5e7ffd96ab8b36577bc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static check </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$lastModifiedTime</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$isPublic</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$options</em> = <code>array()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Exit if the client's cache is valid for this resource</p>
<p>This is a convenience method for common use of the class</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$lastModifiedTime</td><td>if given, both ETag AND Last-Modified headers will be sent with content. This is recommended.</td></tr>
    <tr><td class="paramtype">bool</td><td class="paramname">$isPublic</td><td>(default false) if true, the Cache-Control header will contain "public", allowing proxies to cache the content. Otherwise "private" will be sent, allowing only browser caching.</td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$options</td><td>(default empty) additional options for constructor</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>null </dd></dl>

</div>
</div>
<a class="anchor" id="a157e0005d82edaa21cbea07fdc5c62da"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getHeaders </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get array of output headers to be sent</p>
<p>In the case of 304 responses, this array will only contain the response code header: array('_responseCode' =&gt; 'HTTP/1.0 304 Not Modified')</p>
<p>Otherwise something like: <code> array( 'Cache-Control' =&gt; 'max-age=0, public' ,'ETag' =&gt; '"foobar"' ) </code></p>
<dl class="section return"><dt>Returns:</dt><dd>array </dd></dl>

</div>
</div>
<a class="anchor" id="ab08b82d956567aa37d5ff4b5ee30ac33"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static gmtDate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get a GMT formatted date for use in HTTP headers</p>
<p><code> header('Expires: ' . HTTP_ConditionalGet::gmtdate($time)); </code></p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$time</td><td>unix timestamp</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>string </dd></dl>

</div>
</div>
<a class="anchor" id="abab55ed2b1496fd1d0f631fc99d71ed4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sendHeaders </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send headers</p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="class_h_t_t_p___conditional_get.html#a157e0005d82edaa21cbea07fdc5c62da">getHeaders()</a></dd></dl>
<p>Note this doesn't "clear" the headers. Calling <a class="el" href="class_h_t_t_p___conditional_get.html#abab55ed2b1496fd1d0f631fc99d71ed4">sendHeaders()</a> will call header() again (but probably have not effect) and <a class="el" href="class_h_t_t_p___conditional_get.html#a157e0005d82edaa21cbea07fdc5c62da">getHeaders()</a> will still return the headers.</p>
<dl class="section return"><dt>Returns:</dt><dd>null </dd></dl>

</div>
</div>
<a class="anchor" id="ad3f66ef242895f3aeda11c349d4427bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">setContentLength </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the Content-Length header in bytes</p>
<p>With most PHP configs, as long as you don't flush() output, this method is not needed and PHP will buffer all output and set Content-Length for you. Otherwise you'll want to call this to let the client know up front.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$bytes</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>int copy of input $bytes </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/usr/local/apache2/htdocs/codebit_org/htdocs/public/min/lib/HTTP/ConditionalGet.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 10 2012 23:59:05 for Codebit by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Codebit: Sabre_DAV_Locks_Plugin Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="photo-1.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Codebit
   &#160;<span id="projectnumber">2.3</span>
   </div>
   <div id="projectbrief">Red Social</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Sabre_DAV_Locks_Plugin Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for Sabre_DAV_Locks_Plugin:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_sabre___d_a_v___locks___plugin.png" usemap="#Sabre_DAV_Locks_Plugin_map" alt=""/>
  <map id="Sabre_DAV_Locks_Plugin_map" name="Sabre_DAV_Locks_Plugin_map">
<area href="class_sabre___d_a_v___server_plugin.html" alt="Sabre_DAV_ServerPlugin" shape="rect" coords="0,0,162,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aece1094240922ef5fdaa189e41281bfd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#aece1094240922ef5fdaa189e41281bfd">__construct</a> (<a class="el" href="class_sabre___d_a_v___locks___backend___abstract.html">Sabre_DAV_Locks_Backend_Abstract</a> $locksBackend=null)</td></tr>
<tr class="memitem:aa875dedc927a6ce31cc1655aa68bf6ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#aa875dedc927a6ce31cc1655aa68bf6ea">initialize</a> (<a class="el" href="class_sabre___d_a_v___server.html">Sabre_DAV_Server</a> $server)</td></tr>
<tr class="memitem:a5ab39446dc5abf2eb72113d01228d0fb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#a5ab39446dc5abf2eb72113d01228d0fb">unknownMethod</a> ($method, $uri)</td></tr>
<tr class="memitem:a4e47fceda6518fa08c281b1a8686d6a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#a4e47fceda6518fa08c281b1a8686d6a4">afterGetProperties</a> ($path, &amp;$newProperties)</td></tr>
<tr class="memitem:a51a05c9d51cf859a4250fe9a58deea79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#a51a05c9d51cf859a4250fe9a58deea79">beforeMethod</a> ($method, $uri)</td></tr>
<tr class="memitem:ac30290b589c493f35b9850ea1a508d31"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#ac30290b589c493f35b9850ea1a508d31">getHTTPMethods</a> ($uri)</td></tr>
<tr class="memitem:a96fc19c600322e93e3e3a3463410e7ca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#a96fc19c600322e93e3e3a3463410e7ca">getFeatures</a> ()</td></tr>
<tr class="memitem:a534789852f586186a56355cc0369544c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#a534789852f586186a56355cc0369544c">getLocks</a> ($uri)</td></tr>
<tr class="memitem:ab7e4230107e7286fd97ba95af182f651"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#ab7e4230107e7286fd97ba95af182f651">lockNode</a> ($uri, <a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a> $lockInfo)</td></tr>
<tr class="memitem:a2cd58e95113d73ac597fe0cc9f31f3ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#a2cd58e95113d73ac597fe0cc9f31f3ba">unlockNode</a> ($uri, <a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a> $lockInfo)</td></tr>
<tr class="memitem:a614692d562aa480843999e2ca6a78466"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#a614692d562aa480843999e2ca6a78466">getTimeoutHeader</a> ()</td></tr>
<tr class="memitem:a48bd0a8bfc0e44368f4ee06826e9d46a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#a48bd0a8bfc0e44368f4ee06826e9d46a">getIfConditions</a> ()</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ac9dbac7ac385b71176373af23163d49b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#ac9dbac7ac385b71176373af23163d49b">httpLock</a> ($uri)</td></tr>
<tr class="memitem:ae95b02537be374f8ff10e67bde456055"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#ae95b02537be374f8ff10e67bde456055">httpUnlock</a> ($uri)</td></tr>
<tr class="memitem:a6aa86240d7daa63f7ec0c4ac99e288a4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#a6aa86240d7daa63f7ec0c4ac99e288a4">generateLockResponse</a> (<a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a> $lockInfo)</td></tr>
<tr class="memitem:a404f18e675b2a881d25cf48cf309ed15"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#a404f18e675b2a881d25cf48cf309ed15">validateLock</a> ($urls=null, &amp;$lastLock=null)</td></tr>
<tr class="memitem:af119741122fbe8bf5058ffa4bd186c11"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sabre___d_a_v___locks___plugin.html#af119741122fbe8bf5058ffa4bd186c11">parseLockRequest</a> ($body)</td></tr>
</table>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aece1094240922ef5fdaa189e41281bfd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__construct </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_sabre___d_a_v___locks___backend___abstract.html">Sabre_DAV_Locks_Backend_Abstract</a>&#160;</td>
          <td class="paramname"><em>$locksBackend</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>__construct</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="class_sabre___d_a_v___locks___backend___abstract.html">Sabre_DAV_Locks_Backend_Abstract</a></td><td class="paramname">$locksBackend</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>void </dd></dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a4e47fceda6518fa08c281b1a8686d6a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">afterGetProperties </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$newProperties</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method is called after most properties have been found it allows us to add in any Lock-related properties</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$path</td><td></td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$properties</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>bool </dd></dl>

</div>
</div>
<a class="anchor" id="a51a05c9d51cf859a4250fe9a58deea79"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">beforeMethod </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method is called before the logic for any HTTP method is handled.</p>
<p>This plugin uses that feature to intercept access to locked resources.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$method</td><td></td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$uri</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>bool </dd></dl>

</div>
</div>
<a class="anchor" id="a6aa86240d7daa63f7ec0c4ac99e288a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">generateLockResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a>&#160;</td>
          <td class="paramname"><em>$lockInfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Generates the response for successfull LOCK requests</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a></td><td class="paramname">$lockInfo</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>string </dd></dl>

</div>
</div>
<a class="anchor" id="a96fc19c600322e93e3e3a3463410e7ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getFeatures </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a list of features for the HTTP OPTIONS Dav: header.</p>
<p>In this case this is only the number 2. The 2 in the Dav: header indicates the server supports locks.</p>
<dl class="section return"><dt>Returns:</dt><dd>array </dd></dl>

<p>Reimplemented from <a class="el" href="class_sabre___d_a_v___server_plugin.html#a96fc19c600322e93e3e3a3463410e7ca">Sabre_DAV_ServerPlugin</a>.</p>

</div>
</div>
<a class="anchor" id="ac30290b589c493f35b9850ea1a508d31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getHTTPMethods </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uri</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use this method to tell the server this plugin defines additional HTTP methods.</p>
<p>This method is passed a uri. It should only return HTTP methods that are available for the specified uri.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$uri</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>array </dd></dl>

<p>Reimplemented from <a class="el" href="class_sabre___d_a_v___server_plugin.html#ac30290b589c493f35b9850ea1a508d31">Sabre_DAV_ServerPlugin</a>.</p>

</div>
</div>
<a class="anchor" id="a48bd0a8bfc0e44368f4ee06826e9d46a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getIfConditions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method is created to extract information from the WebDAV HTTP 'If:' header</p>
<p>The If header can be quite complex, and has a bunch of features. We're using a regex to extract all relevant information The function will return an array, containg structs with the following keys</p>
<ul>
<li>uri - the uri the condition applies to. This can be an empty string for 'every relevant url'</li>
<li>tokens - The lock token. another 2 dimensional array containg 2 elements (0 = true/false.. If this is a negative condition its set to false, 1 = the actual token)</li>
<li>etag - an etag, if supplied</li>
</ul>
<dl class="section return"><dt>Returns:</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a534789852f586186a56355cc0369544c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getLocks </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uri</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns all lock information on a particular uri</p>
<p>This function should return an array with <a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a> objects. If there are no locks on a file, return an empty array.</p>
<p>Additionally there is also the possibility of locks on parent nodes, so we'll need to traverse every part of the tree</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$uri</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>array </dd></dl>

</div>
</div>
<a class="anchor" id="a614692d562aa480843999e2ca6a78466"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">getTimeoutHeader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the contents of the HTTP Timeout header.</p>
<p>The method formats the header into an integer.</p>
<dl class="section return"><dt>Returns:</dt><dd>int </dd></dl>

</div>
</div>
<a class="anchor" id="ac9dbac7ac385b71176373af23163d49b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">httpLock </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uri</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Locks an uri</p>
<p>The WebDAV lock request can be operated to either create a new lock on a file, or to refresh an existing lock If a new lock is created, a full XML body should be supplied, containing information about the lock such as the type of lock (shared or exclusive) and the owner of the lock</p>
<p>If a lock is to be refreshed, no body should be supplied and there should be a valid If header containing the lock</p>
<p>Additionally, a lock can be requested for a non-existant file. In these case we're obligated to create an empty file as per RFC4918:S7.3</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$uri</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="ae95b02537be374f8ff10e67bde456055"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">httpUnlock </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uri</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unlocks a uri</p>
<p>This WebDAV method allows you to remove a lock from a node. The client should provide a valid locktoken through the Lock-token http header The server should return 204 (No content) on success</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$uri</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="aa875dedc927a6ce31cc1655aa68bf6ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">initialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_sabre___d_a_v___server.html">Sabre_DAV_Server</a>&#160;</td>
          <td class="paramname"><em>$server</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the plugin</p>
<p>This method is automatically called by the Server class after addPlugin.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype"><a class="el" href="class_sabre___d_a_v___server.html">Sabre_DAV_Server</a></td><td class="paramname">$server</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>void </dd></dl>

<p>Reimplemented from <a class="el" href="class_sabre___d_a_v___server_plugin.html#aa875dedc927a6ce31cc1655aa68bf6ea">Sabre_DAV_ServerPlugin</a>.</p>

</div>
</div>
<a class="anchor" id="ab7e4230107e7286fd97ba95af182f651"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lockNode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a>&#160;</td>
          <td class="paramname"><em>$lockInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Locks a uri</p>
<p>All the locking information is supplied in the lockInfo object. The object has a suggested timeout, but this can be safely ignored It is important that if the existing timeout is ignored, the property is overwritten, as this needs to be sent back to the client</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$uri</td><td></td></tr>
    <tr><td class="paramtype"><a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a></td><td class="paramname">$lockInfo</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="af119741122fbe8bf5058ffa4bd186c11"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">parseLockRequest </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$body</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Parses a webdav lock xml body, and returns a new <a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a> object</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$body</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd><a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a5ab39446dc5abf2eb72113d01228d0fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unknownMethod </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This method is called by the Server if the user used an HTTP method the server didn't recognize.</p>
<p>This plugin intercepts the LOCK and UNLOCK methods.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$method</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>bool </dd></dl>

</div>
</div>
<a class="anchor" id="a2cd58e95113d73ac597fe0cc9f31f3ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unlockNode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a>&#160;</td>
          <td class="paramname"><em>$lockInfo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unlocks a uri</p>
<p>This method removes a lock from a uri. It is assumed all the supplied information is correct and verified</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$uri</td><td></td></tr>
    <tr><td class="paramtype"><a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a></td><td class="paramname">$lockInfo</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="a404f18e675b2a881d25cf48cf309ed15"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">validateLock </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$urls</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;&#160;</td>
          <td class="paramname"><em>$lastLock</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>validateLock should be called when a write operation is about to happen It will check if the requested url is locked, and see if the correct lock tokens are passed</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$urls</td><td>List of relevant urls. Can be an array, a string or nothing at all for the current request uri </td></tr>
    <tr><td class="paramtype">mixed</td><td class="paramname">$lastLock</td><td>This variable will be populated with the last checked lock object (<a class="el" href="class_sabre___d_a_v___locks___lock_info.html">Sabre_DAV_Locks_LockInfo</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>bool </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/usr/local/apache2/htdocs/codebit_org/htdocs/ips_kernel/sabre/Sabre/DAV/Locks/Plugin.php</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 10 2012 23:59:07 for Codebit by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
